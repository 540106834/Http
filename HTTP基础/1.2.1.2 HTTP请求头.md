
#  **HTTP 请求头（Request Header）详解**

HTTP 请求头是请求报文中用来传递客户端信息、控制请求行为和身份验证的部分，通常放在请求行后面。

请求报文结构示例：

```
GET /api/users HTTP/1.1
Host: example.com
User-Agent: curl/7.88.1
Accept: application/json
Authorization: Bearer abcdef12345
```

---

## **1️ 通用请求头（客户端信息）**

| 头部                  | 功能          | 示例                                 | 应用场景                |
| ------------------- | ----------- | ---------------------------------- | ------------------- |
| **Host**            | 指定请求的服务器域名  | `Host: example.com`                | 虚拟主机识别              |
| **User-Agent**      | 客户端信息       | `User-Agent: Mozilla/5.0`          | 统计客户端类型或做兼容处理       |
| **Accept**          | 客户端能接收的数据类型 | `Accept: application/json`         | API 请求返回 JSON / XML |
| **Accept-Encoding** | 客户端支持的压缩方式  | `Accept-Encoding: gzip, deflate`   | 节省带宽，启用压缩           |
| **Accept-Language** | 客户端语言偏好     | `Accept-Language: zh-CN, en;q=0.9` | 国际化页面               |

---

## **2️ 缓存控制相关头**

| 头部                    | 功能                     | 示例                                                 | 应用场景           |
| --------------------- | ---------------------- | -------------------------------------------------- | -------------- |
| **If-Modified-Since** | 条件请求，仅当资源更新后才返回        | `If-Modified-Since: Wed, 21 Oct 2025 07:28:00 GMT` | 节省带宽，HTTP 缓存控制 |
| **If-None-Match**     | 与 ETag 对比，资源未更新则返回 304 | `If-None-Match: "abc123"`                          | 高效缓存机制         |
| **Cache-Control**     | 缓存策略                   | `Cache-Control: no-cache`                          | 控制代理/浏览器缓存行为   |

---

## **3️ 身份认证与安全**

| 头部                | 功能       | 示例                                  | 应用场景                |
| ----------------- | -------- | ----------------------------------- | ------------------- |
| **Authorization** | 提供身份认证信息 | `Authorization: Bearer token`       | JWT 或 OAuth2 API 认证 |
| **Cookie**        | 会话标识     | `Cookie: sessionId=abcdef123`       | 维持登录状态              |
| **Origin**        | 指定请求来源   | `Origin: https://example.com`       | CORS 跨域请求验证         |
| **Referer**       | 来源页面 URL | `Referer: https://example.com/page` | 防盗链、统计来源            |

---

## **4️ 请求体与内容相关**

| 头部                    | 功能    | 示例                               | 应用场景                 |
| --------------------- | ----- | -------------------------------- | -------------------- |
| **Content-Type**      | 请求体格式 | `Content-Type: application/json` | POST/PUT 请求，服务器解析请求体 |
| **Content-Length**    | 请求体长度 | `Content-Length: 123`            | 告诉服务器请求体大小           |
| **Transfer-Encoding** | 传输方式  | `Transfer-Encoding: chunked`     | 分块传输，动态生成内容          |

---

## **5️ 其他常用控制头**

| 头部                   | 功能        | 示例                                 | 应用场景             |
| -------------------- | --------- | ---------------------------------- | ---------------- |
| **Connection**       | 控制连接是否保持  | `Connection: keep-alive`           | HTTP 长连接，提高性能    |
| **Upgrade**          | 协议升级      | `Upgrade: websocket`               | HTTP → WebSocket |
| **X-Requested-With** | AJAX 请求标识 | `X-Requested-With: XMLHttpRequest` | 判断是否 AJAX 调用     |

---

## **6️ 实战技巧**

1. **调试 API**

   * 使用 `curl -v -H "Authorization: Bearer token" https://api.example.com` 查看请求头
2. **性能优化**

   * `Accept-Encoding: gzip` + `Cache-Control` 配合 CDN
3. **安全防护**

   * 检查 `Origin` 与 `Referer` 防跨站请求
4. **微服务 / 云原生**

   * 自定义请求头传递 trace 信息，例如 `X-Request-ID` 或 `X-B3-TraceId`

---

 **总结**

HTTP 请求头是控制客户端行为、身份认证、缓存和跨域的核心工具。理解它的作用：

* 能快速调试 API
* 优化性能
* 保障安全
* 理解微服务请求链路


