# **最全面、最实用、开发视角的 “POST 请求详解”**
 包含：
* POST 的本质
* POST 数据是如何传输的
* POST vs GET 的本质区别
* POST 可携带哪些格式
* POST 的常见业务场景
* POST 的报文结构（请求行/头/体）
* Curl/Postman 实例
* tcpdump/Wireshark 抓包分析思路
* 后端如何处理 POST

---

#  什么是 POST 请求？（一句话）

**POST 用于向服务器“提交数据”，并可能会“创建/修改资源”。**

典型用途：

* 提交表单
* 登录
* 注册
* 创建订单
* 上传文件
* 接口传 JSON

---

# 1️ POST 请求的本质作用

## ✔ 1. 提交数据（Submit Data）

你把信息发送给服务器，让服务器处理：

例如：

* 用户名 + 密码
* JSON
* 上传文件
* 表单内容

---

## ✔ 2. 创建新的资源（Create Resource）

符合 **REST API 设计规范**：

* POST /users → 创建用户
* POST /orders → 创建订单
* POST /items → 新建商品

成功通常返回：

* 201 Created
* Location: /users/123

---

## ✔ 3. 执行某种动作

不属于 CRUD，但需要服务器执行逻辑：

* POST /auth/login（执行登录）
* POST /payment/charge（执行支付）
* POST /jobs/run（后台执行任务）

---

# 2️ POST 请求的数据是如何传输的？

核心特点：
**POST 数据放在请求体（Request Body）里**。

 不放在 URL 里（虽然可以，但不推荐）。

---

# 3️ POST 请求完整结构（报文格式）

## 【请求行】

```
POST /api/login HTTP/1.1
```

## 【请求头】

```
Host: example.com
Content-Type: application/json
Content-Length: 37
Authorization: Bearer xxxxxx
```

## 【请求体】

根据 Content-Type 的不同而不同，例如 JSON：

```
{
  "username": "test",
  "password": "123456"
}
```

这是最典型的 REST API 请求。

---

# 4️ POST 常见 Content-Type（重点）

## ✔ application/json（最常用）

发送 JSON 数据。

```
Content-Type: application/json
```

请求体：

```
{"name": "Tom", "age": 20}
```

---

## ✔ application/x-www-form-urlencoded（浏览器表单默认）

传统 HTML 表单提交方式。

```
username=Tom&age=20
```

浏览器会自动 encode。

---

## ✔ multipart/form-data（文件上传）

上传文件时必须用这个：

```
Content-Type: multipart/form-data; boundary=xxxx
```

可同时发送：

* 文件
* 文本字段

---

## ✔ text/plain（纯文本）

很少用于 API。

---

## ✔ binary/octet-stream（纯二进制）

常用于：

* 文件上传
* 流式上传

---

# 5️ POST vs GET 的本质区别

| 特性      | GET          | POST            |
| ------- | ------------ | --------------- |
| 数据放哪里   | URL（query）   | 请求体             |
| 是否能传大数据 | 较少（URL 限制）   | 可以（GB级别都可）      |
| 是否会缓存   | 会            | 默认不会            |
| 语义      | 获取数据（不会修改资源） | 会修改 / 创建资源      |
| 是否安全    | 相对安全性低       | 较安全（数据不在 URL）   |
| 是否幂等    | 是            | 否（重复请求可能创建多个资源） |

---

# 6️ POST 的常见业务场景

### ✔ 登录

POST /auth/login
发送：

```
{"username": "xx", "password": "xx"}
```

### ✔ 注册

POST /users

### ✔ 创建订单

POST /orders

### ✔ 上传文件

POST /upload
Content-Type: multipart/form-data

### ✔ 搜索（复杂条件）

虽然是获取，但参数太多 → 用 POST
POST /products/search

### ✔ 批量操作

POST /items/batch-delete

### ✔ 执行后端任务

POST /task/start

---

# 7️ Curl 发送 POST 举例（最常用模板）

## ✔ JSON

```
curl -X POST https://api.test.com/login \
  -H "Content-Type: application/json" \
  -d '{"username":"a","password":"b"}'
```

## ✔ 表单（urlencoded）

```
curl -X POST https://api.test.com/form \
  -d "name=tom&age=20"
```

## ✔ 上传文件 multipart/form-data

```
curl -X POST https://api.test.com/upload \
  -F "file=@test.png" \
  -F "user=abc"
```

---

# 8️ tcpdump / Wireshark 分析 POST

如果你抓包：

```
tcpdump -i eth0 -A -s 0 tcp port 80
```

你能看到：

* POST 方法
* 请求头
* 请求体（未加密）

⚠ 但 **HTTPS 下看不到正文**（因为加密）。

---

# 9️ 后端如何处理 POST 请求？

以常见流程为例：

1. 解析 Content-Type

   * JSON → 解析 JSON
   * multipart → 解析表单和文件
   * urlencoded → 解析键值对

2. 验证参数

   * 是否缺字段
   * 是否格式错误
   * 校验失败 → 400 Bad Request

3. 处理业务逻辑

   * 登录校验
   * 写数据库
   * 新建订单
   * 上传文件保存

4. 统一返回

   * 成功 → 200 / 201
   * 创建成功 → 201
   * 无内容 → 204

---

#  总结一句话

> **POST 用于提交数据，创建或改变资源，数据在请求体中，最常用的格式是 JSON 或 multipart。**

---

如果你愿意，我还能给你：

### ✔ POST 与 PUT/PATCH 的区别（REST 语义）

### ✔ 后端接口应该怎么设计你的 POST Body（最佳实践）

### ✔ Curl + tcpdump 的实际排查案例（你问我场景，我用真实抓包方式讲）

### ✔ JSON、urlencoded、form-data 的深度差异与使用时机

你要哪个？
