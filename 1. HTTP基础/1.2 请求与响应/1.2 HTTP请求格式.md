ä¸‹é¢ç»™ä½ **æœ€å‡†ç¡®ã€æœ€æ¸…æ™°ã€é¢è¯•çº§åˆ«**çš„ **HTTP è¯·æ±‚æ ¼å¼ï¼ˆHTTP Request Formatï¼‰**ï¼ŒåŒ…å«ï¼š

* å®Œæ•´æ ¼å¼ï¼ˆå«èµ·å§‹è¡Œã€headerã€bodyï¼‰
* GET / POST çš„å·®å¼‚
* JSON / è¡¨å• / æ–‡ä»¶ä¸Šä¼ ç­‰å¸¸è§ body æ ¼å¼
* æœ€ç»ˆç»™ä½ ä¸€ä¸ªå®Œæ•´çš„ã€ŒåŸå§‹ TCP æŠ“åŒ…çº§ã€HTTP è¯·æ±‚ç¤ºä¾‹ï¼ˆå’Œ Alertmanager/Prometheus ä¸€æ ·ï¼‰

---

#  ä¸€ã€HTTP è¯·æ±‚çš„å®Œæ•´ç»“æ„ï¼ˆæ ‡å‡†æ ¼å¼ï¼‰

HTTP Request ç”± **3 éƒ¨åˆ†** æ„æˆï¼š

```
<1> è¯·æ±‚è¡Œï¼ˆRequest Lineï¼‰
<2> è¯·æ±‚å¤´ï¼ˆHeadersï¼‰
<3> ç©ºè¡Œ
<4> æ¶ˆæ¯ä½“ï¼ˆBodyï¼Œå¯é€‰ï¼‰
```

### ğŸ”¹ è¯·æ±‚è¡Œ (Request Line)

```
<METHOD> <PATH>?<QUERY> <HTTP-VERSION>
```

ä¾‹å¦‚ï¼š

```
GET /api/v1/users?id=123 HTTP/1.1
POST /alert HTTP/1.1
```

---

#  äºŒã€è¯·æ±‚å¤´ï¼ˆHeadersï¼‰

æ¯ä¸€è¡Œæ˜¯ä¸€ä¸ª key: valueï¼š

å¸¸è§å¤´ï¼š

| Header         | è¯´æ˜          |
| -------------- | ----------- |
| Host           | ç›®æ ‡æœåŠ¡å™¨åŸŸåæˆ– IP |
| Content-Type   | body çš„æ ¼å¼    |
| Content-Length | body çš„é•¿åº¦    |
| User-Agent     | å®¢æˆ·ç«¯ä¿¡æ¯       |
| Authorization  | è®¤è¯å¤´         |
| Accept         | å¸Œæœ›è¿”å›çš„å†…å®¹æ ¼å¼   |

ç¤ºä¾‹ï¼š

```
Host: example.com
Content-Type: application/json
Content-Length: 27
User-Agent: curl/7.88
```

---

#  ä¸‰ã€æ¶ˆæ¯ä½“ï¼ˆBodyï¼‰

åªæœ‰ **POST/PUT/PATCH** ç­‰æœ‰ bodyï¼ŒGET é€šå¸¸æ²¡æœ‰ã€‚

---

#  å››ã€å®Œæ•´çš„ HTTP è¯·æ±‚ç¤ºä¾‹ï¼ˆæœ€æ ‡å‡†ï¼‰

### è¿™æ˜¯ä½ ä¼šåœ¨ç½‘ç»œæŠ“åŒ…ï¼ˆtcpdumpã€wiresharkã€mitmproxyï¼‰çœ‹åˆ°çš„åŸå§‹æ ¼å¼ï¼š

```
POST /webhook HTTP/1.1
Host: example.com
Content-Type: application/json
Content-Length: 108
User-Agent: curl/7.88
Accept: */*

{
  "alert": "HighMemory",
  "value": 98,
  "labels": {
    "instance": "node1",
    "severity": "critical"
  }
}
```

 **æ³¨æ„**ï¼š
Header åŒºåŸŸåå¿…é¡»æœ‰ **ä¸€ä¸ªç©ºè¡Œ**ï¼Œç©ºè¡Œåæ‰æ˜¯ bodyã€‚

---

#  äº”ã€å¸¸è§ Content-Type å’Œ body æ ¼å¼

## 1ï¼‰`application/json`ï¼ˆæœ€å¸¸ç”¨ï¼‰

```
Content-Type: application/json

{"name": "test", "age": 18}
```

APIã€Alertmanagerã€Prometheus Remote Write éƒ½å¤§é‡ä½¿ç”¨ã€‚

---

## 2ï¼‰`application/x-www-form-urlencoded`ï¼ˆè¡¨å•æ ¼å¼ï¼‰

```
Content-Type: application/x-www-form-urlencoded

username=aaa&password=bbb
```

---

## 3ï¼‰`multipart/form-data`ï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰

```
Content-Type: multipart/form-data; boundary=----12345

------12345
Content-Disposition: form-data; name="file"; filename="a.txt"
Content-Type: text/plain

hello world
------12345--
```

ç”¨äºä¸Šä¼ å›¾ç‰‡ã€å‹ç¼©åŒ…ç­‰ã€‚

---

#  å…­ã€GET è¯·æ±‚ç¤ºä¾‹ï¼ˆæ—  bodyï¼‰

```
GET /users?limit=10&offset=20 HTTP/1.1
Host: api.example.com
Accept: application/json
User-Agent: curl/7.88
```

GET è¯·æ±‚ä¸€èˆ¬ä¸åŒ…å« bodyï¼Œæ•°æ®æ”¾åœ¨ URL å‚æ•°é‡Œã€‚

---

#  ä¸ƒã€POST è¯·æ±‚ç¤ºä¾‹ï¼ˆå« bodyï¼‰

```
POST /api/login HTTP/1.1
Host: auth.example.com
Content-Type: application/json
Content-Length: 45

{"username": "user1", "password": "1234"}
```

---

#  å…«ã€Alertmanager â†’ Webhook çš„çœŸå® HTTP è¯·æ±‚æ ¼å¼ï¼ˆä½ æœ€å¸¸ç”¨ï¼‰

```
POST /alert HTTP/1.1
Host: myserver:8000
User-Agent: Alertmanager/0.26.0
Content-Type: application/json
Content-Length: 623

{
  "receiver": "webhook",
  "status": "firing",
  "alerts": [
    {
      "labels": {
        "alertname": "HighMemory",
        "instance": "node1"
      },
      "annotations": {
        "summary": "memory is high"
      }
    }
  ]
}
```

---

#  ä¹ã€æ€»ç»“ï¼ˆé¢è¯•å›ç­”æ¨¡æ¿ï¼‰

**ä¸€ä¸ª HTTP è¯·æ±‚çš„æ ¼å¼ç”±å››éƒ¨åˆ†ç»„æˆï¼š**

```
<æ–¹æ³•> <è·¯å¾„> <åè®®>
<è¯·æ±‚å¤´>
<ç©ºè¡Œ>
<æ¶ˆæ¯ä½“ï¼ˆå¯é€‰ï¼‰>
```

body æ ¼å¼éœ€ç”± `Content-Type` å†³å®šã€‚

---

å¦‚æœä½ éœ€è¦ï¼Œæˆ‘å¯ä»¥ç»™ä½ ï¼š

âœ” **HTTP å“åº”æ ¼å¼ï¼ˆResponse Formatï¼‰**
âœ” **HTTP/1.1ã€HTTP/2ã€HTTP/3åŒºåˆ«**
âœ” **Prometheus / Alertmanager å®é™… HTTP è¯·æ±‚æŠ“åŒ…ç¤ºä¾‹**
âœ” **Python å®¢æˆ·ç«¯å¦‚ä½•æ„é€ åŸå§‹ HTTP è¯·æ±‚ï¼ˆsocket ç‰ˆï¼‰**

è¦å“ªä¸ªï¼Ÿ
