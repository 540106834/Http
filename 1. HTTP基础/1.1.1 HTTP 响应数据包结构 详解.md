# **HTTP å“åº”æ•°æ®åŒ…ç»“æ„è¯¦è§£**
å¼€å‘æ’æŸ¥è§†è§’ + æŠ“åŒ…å®ç”¨æ€§ï¼Œå†…å®¹ä»çŠ¶æ€è¡Œåˆ°å“åº”ä½“é€å­—æ®µè®²è§£ï¼Œå¹¶é™„çœŸå®æ¡ˆä¾‹ã€‚


# **ä¸€ã€HTTP å“åº”æ•°æ®åŒ…æ¦‚è¿°**

HTTP å“åº”æ˜¯æœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯è¯·æ±‚çš„å›å¤ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```
HTTP Response Message
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Status Lineï¼ˆçŠ¶æ€è¡Œï¼‰          â”‚ ä¾‹å¦‚ï¼šHTTP/1.1 200 OK
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Response Headersï¼ˆå“åº”å¤´ï¼‰      â”‚ å¦‚ Content-Type, Set-Cookie
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç©ºè¡Œï¼ˆå¿…é¡»ï¼‰                   â”‚ åˆ†éš”å¤´éƒ¨ä¸ä¸»ä½“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Response Bodyï¼ˆå“åº”ä½“ï¼Œå¯é€‰ï¼‰  â”‚ HTML/JSON/æ–‡ä»¶/äºŒè¿›åˆ¶æµ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> æ‰€æœ‰ HTTP ç‰ˆæœ¬ï¼ˆ1.0/1.1/2.0/3.0ï¼‰éƒ½æœ‰ç±»ä¼¼ç»“æ„ï¼Œåªæ˜¯ HTTP/2 ä¸ HTTP/3 ä½¿ç”¨äºŒè¿›åˆ¶å¸§ä¼ è¾“ï¼ŒæŠ¥æ–‡æ¦‚å¿µä¸Šä¾ç„¶ç›¸åŒã€‚

---

# **äºŒã€çŠ¶æ€è¡Œï¼ˆStatus Lineï¼‰**

çŠ¶æ€è¡ŒåŒ…å«ä¸‰ä¸ªéƒ¨åˆ†ï¼š

```
<HTTP-Version> <Status-Code> <Reason-Phrase>
```

### ç¤ºä¾‹ï¼š

```
HTTP/1.1 200 OK
```

### å­—æ®µè¯´æ˜ï¼š

| å­—æ®µ            | ä½œç”¨         | ä¾‹å­                                   |
| ------------- | ---------- | ------------------------------------ |
| HTTP-Version  | æœåŠ¡å™¨ä½¿ç”¨çš„åè®®ç‰ˆæœ¬ | HTTP/1.1                             |
| Status-Code   | å“åº”çŠ¶æ€ç ï¼Œä¸‰ä½æ•°å­— | 200, 404, 500                        |
| Reason-Phrase | çŠ¶æ€æè¿°ï¼Œå¯è¯»æ€§   | OK, Not Found, Internal Server Error |

**æ³¨æ„ï¼š** çŠ¶æ€ç æ˜¯æœºå™¨è§£ææ ¸å¿ƒï¼ŒReason-Phrase å¯ä»¥å¿½ç•¥æˆ–è‡ªå®šä¹‰ã€‚

---

# **ä¸‰ã€å“åº”å¤´ï¼ˆResponse Headersï¼‰**

å“åº”å¤´æ˜¯ key:value å½¢å¼çš„å…ƒæ•°æ®ï¼Œç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯å¦‚ä½•è§£æå“åº”ä½“ã€ç¼“å­˜ã€è®¤è¯ç­‰ã€‚

### å¸¸è§å“åº”å¤´åŠä½œç”¨ï¼š

| Header            | ä½œç”¨        | ç¤ºä¾‹                                                         |
| ----------------- | --------- | ---------------------------------------------------------- |
| Content-Type      | æŒ‡æ˜å“åº”ä½“æ ¼å¼   | application/json; charset=utf-8                            |
| Content-Length    | å“åº”ä½“å­—èŠ‚é•¿åº¦   | 128                                                        |
| Transfer-Encoding | åˆ†å—ä¼ è¾“æ ‡è¯†    | chunked                                                    |
| Cache-Control     | ç¼“å­˜ç­–ç•¥      | no-cache, max-age=3600                                     |
| Set-Cookie        | è®¾ç½® Cookie | sessionid=abc123; HttpOnly                                 |
| Server            | æœåŠ¡å™¨è½¯ä»¶ä¿¡æ¯   | nginx/1.24                                                 |
| Date              | å“åº”æ—¶é—´      | Sat, 16 Nov 2025 06:00:00 GMT                              |
| Connection        | è¿æ¥ç®¡ç†      | keep-alive / close                                         |
| ETag              | èµ„æºç‰ˆæœ¬æ ‡è¯†    | "abc123"                                                   |
| Location          | é‡å®šå‘ç›®æ ‡     | [https://example.com/newpage](https://example.com/newpage) |

**ç¤ºä¾‹å®Œæ•´å¤´éƒ¨ï¼š**

```
Content-Type: application/json
Content-Length: 32
Cache-Control: no-cache
Set-Cookie: sessionid=abcd1234; HttpOnly
Server: nginx/1.24
Date: Sat, 16 Nov 2025 06:00:00 GMT
```

---

# **å››ã€ç©ºè¡Œï¼ˆCRLFï¼‰**

* è¯·æ±‚å¤´å’Œå“åº”ä½“ä¹‹é—´å¿…é¡»æœ‰ä¸€ä¸ªç©ºè¡Œï¼ˆCRLFï¼‰
* ç©ºè¡Œå‘Šè¯‰å®¢æˆ·ç«¯ï¼šå¤´éƒ¨ç»“æŸï¼Œæ¥ä¸‹æ¥æ˜¯æ­£æ–‡

```
[Response Headers]
\r\n
[Response Body]
```

---

# **äº”ã€å“åº”ä½“ï¼ˆResponse Bodyï¼‰**

å“åº”ä½“åŒ…å«å®é™…æ•°æ®å†…å®¹ï¼Œå¯é€‰ã€‚
ç±»å‹ç”± `Content-Type` å†³å®šï¼š

### å¸¸è§ç±»å‹ï¼š

1. **JSON**ï¼ˆAPI æ¥å£ï¼‰

```
{"id":1,"username":"tom"}
```

2. **HTML**ï¼ˆç½‘é¡µï¼‰

```
<html><body>Hello World</body></html>
```

3. **å›¾ç‰‡ / äºŒè¿›åˆ¶æ–‡ä»¶**

* Content-Type: image/png
* å†…å®¹æ˜¯äºŒè¿›åˆ¶æµ

4. **ç©ºå“åº”**

* Content-Length: 0
* çŠ¶æ€ç é€šå¸¸ä¸º 204 No Content

---

# **å…­ã€ä¼ è¾“æ–¹å¼**

1. **Content-Length**

* è¡¨æ˜å“åº”ä½“é•¿åº¦
* å®¢æˆ·ç«¯æŒ‰å­—èŠ‚è¯»å–

2. **Transfer-Encoding: chunked**

* åˆ†å—ä¼ è¾“
* æ¯å—å‰æœ‰å—å¤§å°æ ‡è¯†ï¼Œé€‚ç”¨äºåŠ¨æ€ç”Ÿæˆå†…å®¹

---

# **ä¸ƒã€å®Œæ•´ç¤ºä¾‹ï¼ˆJSON API å“åº”ï¼‰**

```
HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 27
Cache-Control: no-cache
Set-Cookie: sessionid=abcd1234; HttpOnly
Server: nginx/1.24
Date: Sat, 16 Nov 2025 06:00:00 GMT

{"id":1,"username":"tom"}
```

è§£é‡Šï¼š

* çŠ¶æ€è¡Œ â†’ è¯·æ±‚æˆåŠŸ
* å¤´éƒ¨ â†’ å‘Šè¯‰å®¢æˆ·ç«¯å¦‚ä½•è§£æ body
* ç©ºè¡Œ â†’ åˆ†éš”å¤´å’Œä½“
* body â†’ å®é™…è¿”å›æ•°æ®

---

# **å…«ã€æŠ“åŒ…åˆ†ææ–¹æ³•**

1. **curl è°ƒè¯•**

```
curl -v https://api.example.com/users/1
```

* `-v` æ˜¾ç¤ºå®Œæ•´çŠ¶æ€è¡Œã€å¤´ã€body

2. **tcpdump**

```
tcpdump -i eth0 -A -s 0 tcp port 80
```

* å¯æŸ¥çœ‹ HTTP åŸå§‹æŠ¥æ–‡

3. **Wireshark**

* è¿‡æ»¤ `http`
* å¯æŸ¥çœ‹ Request / Response åŒ…
* å±•ç¤ºå¤´éƒ¨å­—æ®µã€çŠ¶æ€ç ã€body

---

# ğŸ”¹ æ€»ç»“

* **çŠ¶æ€è¡Œ** â†’ è¯´æ˜å“åº”çŠ¶æ€ï¼ˆæˆåŠŸ/å¤±è´¥/é‡å®šå‘ï¼‰
* **å“åº”å¤´** â†’ å‘Šè¯‰å®¢æˆ·ç«¯æ•°æ®ç±»å‹ã€é•¿åº¦ã€ç¼“å­˜ã€Cookie ç­‰
* **ç©ºè¡Œ** â†’ å¿…é¡»ï¼Œåˆ†éš”å¤´éƒ¨å’Œæ­£æ–‡
* **å“åº”ä½“** â†’ å®é™…è¿”å›çš„æ•°æ®ï¼Œå¯ä¸º JSONã€HTMLã€äºŒè¿›åˆ¶ç­‰
* **ä¼ è¾“æ–¹å¼** â†’ Content-Length æˆ– chunked

> ç†è§£ HTTP å“åº”åŒ…ç»“æ„ï¼Œæœ‰åŠ©äºï¼š
>
> * åç«¯æ¥å£è®¾è®¡
> * å‰ç«¯è¯·æ±‚è°ƒè¯•
> * æŠ“åŒ…æ’é”™
> * æ€§èƒ½ä¼˜åŒ–ï¼ˆç¼“å­˜ã€å‹ç¼©ã€åˆ†å—ä¼ è¾“ï¼‰

---

æˆ‘å¯ä»¥å¸®ä½ ç”»ä¸€å¼ **HTTP è¯·æ±‚å’Œå“åº”å®Œæ•´æ•°æ®åŒ…æ—¶åºå›¾**ï¼Œå¸¦ä¸Š **TCP ä¸‰æ¬¡æ¡æ‰‹ã€TLS åŠ å¯†æµç¨‹**ï¼Œè®©ä½ çœ‹æ‡‚çœŸå®ç½‘ç»œä¸­æŠ¥æ–‡ä¼ è¾“å…¨è¿‡ç¨‹ã€‚

ä½ æƒ³è¦æˆ‘ç”»å—ï¼Ÿ
