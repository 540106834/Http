
#  **什么是 nc (netcat)**

* `nc`，又叫 **网络瑞士军刀**
* 作用：**TCP/UDP 端口测试、数据传输、端口监听、调试网络服务**
* 支持 Linux / macOS / Windows（ncat 版本）
* 可以看作 “轻量级 telnet + tcpdump + socket 工具”

---

#  **nc 的核心功能**

1. **端口连通性测试**（最常用）
2. **TCP/UDP 数据发送与接收**
3. **端口监听/模拟服务**
4. **文件传输 / 远程调试**
5. **结合管道实现快速网络调试**


#  **nc 核心参数详解**

| 参数             | 说明                                        | 举例                                         |                                        |
| -------------- | ----------------------------------------- | ------------------------------------------ | -------------------------------------- |
| `-v`           | verbose，显示详细过程                            | `nc -v 192.168.1.10 80` → 输出连接尝试信息         |                                        |
| `-vv`          | 更详细                                       | `nc -vv 192.168.1.10 80` → 输出更多 debug 信息   |                                        |
| `-z`           | zero-I/O 模式，只扫描端口，不发送数据                   | `nc -vz 192.168.1.10 22` → 检测端口是否开放        |                                        |
| `-n`           | 不解析域名，只用 IP                               | `nc -vn 8.8.8.8 53` → 避免 DNS 解析            |                                        |
| `-l`           | 监听模式（server）                              | `nc -l 12345` → 本地 TCP 12345 端口监听          |                                        |
| `-p <port>`    | 指定监听端口                                    | `nc -l -p 12345` → 明确指定端口                  |                                        |
| `-u`           | 使用 UDP 协议                                 | `nc -vu 192.168.1.10 53` → UDP 端口扫描        |                                        |
| `-w <seconds>` | 超时设置                                      | `nc -vz -w 3 192.168.1.10 80` → 超过 3 秒视为失败 |                                        |
| `-k`           | keep open，持续监听多次连接                        | `nc -lk 12345` → 多次 TCP 连接不中断              |                                        |
| `-q <seconds>` | 发送完毕后等待多少秒关闭                              | `echo "hello"                              | nc -q 2 192.168.1.10 12345` → 等 2 秒再断开 |
| `-T`           | 使用 TCP SYN（某些版本，如 Linux traceroute/TCP探测） | 用于 TCP 端口探测                                |                                        |
| `< file`       | 从文件发送数据                                   | `nc 192.168.1.10 12345 < send.txt`         |                                        |
| `> file`       | 接收数据写入文件                                  | `nc -l 12345 > received.txt`               |                                        |

---

#  **常用场景示例**

### 1️ 测试 TCP 端口

```bash
nc -vz 192.168.1.10 22
```

* `-v` 显示连接过程
* `-z` 只扫描端口，不发送数据
* 输出：

```
Connection to 192.168.1.10 22 port [tcp/ssh] succeeded!
```

---

### 2️ 测试 UDP 端口

```bash
nc -vzu 192.168.1.10 53
```

* `-u` 使用 UDP
* 注意 UDP 不可靠，可能无返回

---

### 3️ 本地监听 TCP

```bash
nc -lk 12345
```

* `-l` 监听
* `-k` 保持持续监听
* 用途：调试客户端发送的数据

---

### 4️ 文件传输

**接收端**

```bash
nc -l 12345 > received.txt
```

**发送端**

```bash
nc 192.168.1.10 12345 < send.txt
```

---

### 5️ 测试端口 + 超时

```bash
nc -vz -w 3 192.168.1.10 443
```

* `-w 3` → 3 秒超时，快速判断端口是否开放

---

### 6️ TCP 数据发送

```bash
echo "Hello World" | nc 192.168.1.10 12345
```

* 直接向指定 IP/端口发送消息

---

#  **排错与调试技巧**

1. **替代 ping 测 TCP/UDP 端口**

```bash
nc -vz host port
```

2. **检查防火墙是否阻止端口**

```bash
nc -vzu 192.168.1.10 161
```

3. **结合 tcpdump 抓包**

```bash
nc -l 12345
tcpdump -i eth0 port 12345
```

* 查看 probe 包是否到达、响应情况

---

如果你愿意，我可以帮你做一张 **nc 核心参数 + 使用场景图表**，可打印成 SOP，直接对应 TCP/UDP 测端口、监听、文件传输等操作，非常直观。

你希望我画吗？


#  **总结**

* `nc` = 网络调试神器
* TCP/UDP 测端口 → `nc -vz[-u] host port`
* 监听端口 → `nc -l -p port`
* 文件传输 → `< send.txt | nc host port`
* 排错重点 → 验证端口开放、防火墙策略、网络连通性


